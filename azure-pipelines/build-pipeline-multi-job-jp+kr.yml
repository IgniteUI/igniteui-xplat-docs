trigger:
  branches:
    include:
    - vnext
    - master
  paths:
    exclude:
    - jp/*
    - kr/*
pr:
  branches:
    exclude:
    - '*'  # must quote since "*" is a YAML reserved character; we want a string

schedules:
- cron: "*/30 * * * *"
  displayName: 'Stability verification schedule'
  always: true
  branches:
    include:
    - azure-pipelines

parameters:
- name: isVerbose
  displayName: 'Get verbose output from steps - where configurable'
  type: boolean
  default: false

name: $(BuildDefinitionName)_$(Year:yyyy).$(Month).$(DayOfMonth)$(Rev:.r)

variables:
  component: 'XPlatDocFX'
  buildType: 'staging'
  ${{ if eq(variables['Build.SourceBranchName'], 'master') }}:
    buildType: 'production'

stages:
- stage: Build
  pool:
    name: BuildAgentOnPrem
    demands: npm
  jobs:
  - template: templates/build-jobs-template.yml
    parameters:
      jobName: WebComponents_JP
      buildType: $(buildType)
      platform: WebComponents
      language: jp

  - template: templates/build-jobs-template.yml
    parameters:
      jobName: React_JP
      buildType: $(buildType)
      platform: React
      language: jp

  - template: templates/build-jobs-template.yml
    parameters:
      jobName: Blazor_JP
      buildType: $(buildType)
      platform: Blazor
      language: jp

  - template: templates/build-jobs-template.yml
    parameters:
      jobName: WebComponents_KR
      buildType: $(buildType)
      platform: WebComponents
      language: kr

  - template: templates/build-jobs-template.yml
    parameters:
      jobName: React_KR
      buildType: $(buildType)
      platform: React
      language: kr

  - template: templates/build-jobs-template.yml
    parameters:
      jobName: Blazor_KR
      buildType: $(buildType)
      platform: Blazor
      language: kr

